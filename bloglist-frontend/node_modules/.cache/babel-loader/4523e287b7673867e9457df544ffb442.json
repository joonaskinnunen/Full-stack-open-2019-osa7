{"ast":null,"code":"import _regeneratorRuntime from \"/Users/joonaskinnunen/Projects/Full-stack-open-2019-osa7/bloglist-frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/joonaskinnunen/Projects/Full-stack-open-2019-osa7/bloglist-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/joonaskinnunen/Projects/Full-stack-open-2019-osa7/bloglist-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/joonaskinnunen/Projects/Full-stack-open-2019-osa7/bloglist-frontend/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport Blog from './components/Blog';\nimport blogService from './services/blogs';\nimport loginService from './services/login';\nimport NewBlog from './components/NewBlog';\nimport Notification from './components/Notification';\nimport Togglable from './components/Togglable';\nimport { useField } from './hooks';\nimport { newNotification } from './reducers/notificationReducer';\nimport { addBlog, initializeBlogs, likeBlog, deleteBlog } from './reducers/blogReducer';\nimport { logIn, logOut } from './reducers/userReducer';\nimport { connect } from 'react-redux';\n\nvar App = function App(props) {\n  var _useField = useField('text'),\n      _useField2 = _slicedToArray(_useField, 1),\n      username = _useField2[0];\n\n  var _useField3 = useField('password'),\n      _useField4 = _slicedToArray(_useField3, 1),\n      password = _useField4[0];\n\n  useEffect(function () {\n    var initializeBlogs = props.initializeBlogs;\n    initializeBlogs();\n  }, [props.initializeBlogs]);\n  useEffect(function () {\n    var loggedUserJSON = window.localStorage.getItem('loggedBlogAppUser');\n\n    if (loggedUserJSON) {\n      var _user = JSON.parse(loggedUserJSON);\n\n      props.logIn(_user);\n      blogService.setToken(_user.token);\n    }\n  }, []);\n\n  var notify = function notify(message, notificationType, time) {\n    props.newNotification(message, notificationType, time);\n  };\n\n  var handleLogin =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(event) {\n      var _user2;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              _context.prev = 1;\n              _context.next = 4;\n              return loginService.login({\n                username: username.value,\n                password: password.value\n              });\n\n            case 4:\n              _user2 = _context.sent;\n              window.localStorage.setItem('loggedBlogAppUser', JSON.stringify(_user2));\n              blogService.setToken(_user2.token);\n              props.logIn(_user2);\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](1);\n              notify('wrong username of password', 'error', 5000);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 10]]);\n    }));\n\n    return function handleLogin(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleLogout = function handleLogout() {\n    props.logOut();\n    blogService.destroyToken();\n    window.localStorage.removeItem('loggedBlogAppUser');\n  };\n\n  var createBlog =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2(blog) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              props.addBlog(blog);\n              notify(\"a new blog \".concat(blog.title, \" by \").concat(blog.author, \" added\"), 'success', 5000);\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function createBlog(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var likeBlog =\n  /*#__PURE__*/\n  function () {\n    var _ref3 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3(blog) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              props.likeBlog(blog);\n              notify(\"blog \".concat(blog.title, \" by \").concat(blog.author, \" liked!\"), 'success', 5000);\n\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function likeBlog(_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var removeBlog =\n  /*#__PURE__*/\n  function () {\n    var _ref4 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee4(blog) {\n      var ok;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              ok = window.confirm(\"remove blog \".concat(blog.title, \" by \").concat(blog.author));\n\n              if (ok) {\n                props.deleteBlog(blog);\n                notify(\"blog \".concat(blog.title, \" by \").concat(blog.author, \" removed!\"), 'success', 5000);\n              }\n\n            case 2:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function removeBlog(_x4) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  if (props.user === null) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"log in to application\"), React.createElement(Notification, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      onSubmit: handleLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"k\\xE4ytt\\xE4j\\xE4tunnus\", React.createElement(\"input\", Object.assign({}, username, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"salasana\", React.createElement(\"input\", Object.assign({}, password, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }))), React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"kirjaudu\")));\n  }\n\n  var newBlogRef = React.createRef();\n\n  var byLikes = function byLikes(b1, b2) {\n    return b2.likes - b1.likes;\n  };\n\n  console.log(props.blogs);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"blogs\"), React.createElement(Notification, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, user.name, \" logged in\"), React.createElement(\"button\", {\n    onClick: handleLogout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"logout\"), React.createElement(Togglable, {\n    buttonLabel: \"create new\",\n    ref: newBlogRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(NewBlog, {\n    createBlog: createBlog,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  })), props.blogs.sort(byLikes).map(function (blog) {\n    return React.createElement(Blog, {\n      key: blog.id,\n      blog: blog,\n      like: likeBlog,\n      remove: removeBlog,\n      user: user,\n      creator: blog.user.username === user.username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    });\n  }));\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    blogs: state.blogs,\n    user: state.user\n  };\n};\n\nvar mapDispatchToProps = {\n  newNotification: newNotification,\n  addBlog: addBlog,\n  initializeBlogs: initializeBlogs,\n  likeBlog: likeBlog,\n  deleteBlog: deleteBlog,\n  logIn: logIn,\n  logOut: logOut\n};\nvar connectedApp = connect(mapStateToProps, mapDispatchToProps)(App);\nexport default connectedApp;","map":{"version":3,"sources":["/Users/joonaskinnunen/Projects/Full-stack-open-2019-osa7/bloglist-frontend/src/App.js"],"names":["React","useState","useEffect","Blog","blogService","loginService","NewBlog","Notification","Togglable","useField","newNotification","addBlog","initializeBlogs","likeBlog","deleteBlog","logIn","logOut","connect","App","props","username","password","loggedUserJSON","window","localStorage","getItem","user","JSON","parse","setToken","token","notify","message","notificationType","time","handleLogin","event","preventDefault","login","value","setItem","stringify","handleLogout","destroyToken","removeItem","createBlog","blog","title","author","removeBlog","ok","confirm","newBlogRef","createRef","byLikes","b1","b2","likes","console","log","blogs","name","sort","map","id","mapStateToProps","state","mapDispatchToProps","connectedApp"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport Blog from './components/Blog'\nimport blogService from './services/blogs'\nimport loginService from './services/login'\nimport NewBlog from './components/NewBlog'\nimport Notification from './components/Notification'\nimport Togglable from './components/Togglable'\nimport { useField } from './hooks'\nimport { newNotification } from './reducers/notificationReducer'\nimport { addBlog, initializeBlogs, likeBlog, deleteBlog } from './reducers/blogReducer'\nimport { logIn, logOut } from './reducers/userReducer'\nimport { connect } from 'react-redux'\n\nconst App = (props) => {\n  const [username] = useField('text')\n  const [password] = useField('password')\n\n  useEffect(() => {\n    const initializeBlogs = props.initializeBlogs\n    initializeBlogs()\n  }, [props.initializeBlogs])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedBlogAppUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      props.logIn(user)\n      blogService.setToken(user.token)\n    }\n  }, [])\n\n  const notify = (message, notificationType, time) => {\n    props.newNotification(message, notificationType, time)\n  }\n\n  const handleLogin = async (event) => {\n    event.preventDefault()\n    try {\n      const user = await loginService.login({\n        username: username.value,\n        password: password.value\n      })\n\n      window.localStorage.setItem('loggedBlogAppUser', JSON.stringify(user))\n      blogService.setToken(user.token)\n      props.logIn(user)\n    } catch (exception) {\n      notify('wrong username of password', 'error', 5000)\n    }\n  }\n\n  const handleLogout = () => {\n    props.logOut()\n    blogService.destroyToken()\n    window.localStorage.removeItem('loggedBlogAppUser')\n  }\n\n  const createBlog = async (blog) => {\n    props.addBlog(blog)\n    notify(`a new blog ${blog.title} by ${blog.author} added`, 'success', 5000)\n  }\n\n  const likeBlog = async (blog) => {\n    props.likeBlog(blog)\n    notify(`blog ${blog.title} by ${blog.author} liked!`, 'success', 5000)\n  }\n\n  const removeBlog = async (blog) => {\n    const ok = window.confirm(`remove blog ${blog.title} by ${blog.author}`)\n    if (ok) {\n      props.deleteBlog(blog)\n      notify(`blog ${blog.title} by ${blog.author} removed!`, 'success', 5000)\n    }\n  }\n\n  if (props.user === null) {\n    return (\n      <div>\n        <h2>log in to application</h2>\n\n        <Notification />\n\n        <form onSubmit={handleLogin}>\n          <div>\n            käyttäjätunnus\n            <input {...username} />\n          </div>\n          <div>\n            salasana\n            <input {...password} />\n          </div>\n          <button type=\"submit\">kirjaudu</button>\n        </form>\n      </div>\n    )\n  }\n\n  const newBlogRef = React.createRef()\n\n  const byLikes = (b1, b2) => b2.likes - b1.likes\n  console.log(props.blogs)\n  return (\n    <div>\n      <h2>blogs</h2>\n\n      <Notification />\n\n      <p>{user.name} logged in</p>\n      <button onClick={handleLogout}>logout</button>\n\n      <Togglable buttonLabel='create new' ref={newBlogRef}>\n        <NewBlog createBlog={createBlog} />\n      </Togglable>\n\n      {props.blogs.sort(byLikes).map(blog =>\n        <Blog\n          key={blog.id}\n          blog={blog}\n          like={likeBlog}\n          remove={removeBlog}\n          user={user}\n          creator={blog.user.username === user.username}\n        />\n      )}\n    </div>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    blogs: state.blogs,\n    user: state.user\n  }\n}\n\nconst mapDispatchToProps = {\n  newNotification,\n  addBlog,\n  initializeBlogs,\n  likeBlog,\n  deleteBlog,\n  logIn,\n  logOut\n}\n\nconst connectedApp = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App)\n\nexport default connectedApp"]},"metadata":{},"sourceType":"module"}